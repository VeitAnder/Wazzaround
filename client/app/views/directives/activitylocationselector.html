<div class="form-group form-group-helptext">
  <label for="address">{{'Meeting spot of this activity' | translate}}</label>

  <div aiotoggleitem
       toggleitemlabel="{{'helptext' | translate}}"
       class="aiotoggleitem">
    {{'helptext activity meeting spot' | translate}}
  </div>
  
  <pre>
   {{ctrl.activity | json}}
  </pre>

  <div class="location input-group input-group-lg">
    <input type="text"
           class="form-control"
           id="address"
           name="address"
           placeholder="{{'Enter address of meeting spot' | translate}}"
           ng-model="ctrl.activity.address"
           ng-options="address.formatted_address as address.formatted_address for address in ctrl.getGoogleAddressAutoCompletionList($viewValue)"
           bs-typeahead
           ng-blur="ctrl.setAddressViaAddressfield()"
           select-on-click
           required
      >
    <span class="input-group-btn">
      <button class="btn"
              type="submit"
              ng-click="ctrl.setAddressViaAddressfield()"
        >
        {{'Set Location' | translate}}
      </button>
    </span>
  </div>

  <span ng-hide="ctrl.activity.address"
        class="alert alert-error">{{'Please select a location.' | translate}}
  </span>

</div>

<div style="width:100%; height:400px; overflow:hidden; position:relative;">

  <ui-gmap-google-map
    center='ctrl.activitybackendmap.map.center'
    zoom='ctrl.activitybackendmap.map.zoom'
    draggable='true'
    events='ctrl.activitybackendmap.map.events'
    options='ctrl.activitybackendmap.map.options'
    >

    <ui-gmap-marker
      coords='ctrl.activitybackendmap.map.clickedMarker'
      icon='ctrl.activitybackendmap.getMarkerIcon(ctrl.activity.category.main)'
      idKey='1'
      options="{
              labelContent: ctrl.activity.name[ctrl.getAvailableTranslationLanguageKey(ctrl.activity.name)],
              }"
      >
    </ui-gmap-marker>

  </ui-gmap-google-map>

</div>

<div class="alert alert-info"
  >{{'Click in map to reposition location of activity' | translate}}
</div>
