<div class="loginform">

</div>

<div class="map-selection-block">

  <div class="section section-map">

    <div class="col-left-fixed controlpanel">
      <div class="language-select"></div>
      <div data-ng-include="'_logo.html'"></div>
      <h2>What's around me?</h2>

      <div class="filter">
        <span class="input_label">Please choose:</span>

        <div class="filter-category filter-category-sports"
             data-ng-class="{active: areItemsInThisCategorySelected('sports'), open: states.sports.open }"
            >
          <div class="filter-category-header"
               data-ng-click="toggleFilter('sports')"
              >
            <h4>Sports & Activities</h4>

            <p>{{numberOfSelectedFromCategory('sports')}} of {{totalNumberOfCategory('sports')}}</p>

            <div class="filter-category-arrow">
              <span></span>
            </div>
          </div>
          <div class="filter-category-body"
               data-ng-show="states.sports.open"
              >

            <div class="filter-toggle">
              <div class="filter-toggle-show"
                   data-ng-class="{active: allSelectedFromCategory('sports')}"
                   data-ng-click="selectAllFromCategory('sports')"
                  >
                Select all
              </div>
              <div class="filter-toggle-hide"
                   data-ng-class="{active: noneSelectedFromCategory('sports')}"
                   data-ng-click="deSelectAllFromCategory('sports')"
                  >
                Deselect all
              </div>
            </div>

            <div
                class="innerwrap"
                >
              <div
                  class="div-row"
                  ng-repeat="category in sportsCategories.db"
                  >

                <div data-ng-if="$index % 2 === 0">
                  <div
                      class="filter-category-sub div-cell"
                      data-ng-if="sportsCategories.db[$index+0]"
                      ng-class="{selected: sportsCategories.db[$index+0].selected}"
                      ng-click="toggleCategorySelection(sportsCategories.db[$index+0])"
                      >
                    <span class="checkbox inline"></span>
                    {{sportsCategories.db[$index+0].title}}
                  </div>

                  <div
                      class="filter-category-sub div-cell"
                      data-ng-if="sportsCategories.db[$index+1]"
                      ng-class="{selected: sportsCategories.db[$index+1].selected}"
                      ng-click="toggleCategorySelection(sportsCategories.db[$index+1])"
                      >
                    <span class="checkbox inline"></span>
                    {{sportsCategories.db[$index+1].title}}
                  </div>
                </div>

              </div>

            </div>
          </div>
        </div>
      </div>

      <div class="filter-category filter-category-culture"
           data-ng-class="{active: areItemsInThisCategorySelected('culture'), open: states.culture.open}"
          >
        <div class="filter-category-header"
             data-ng-click="toggleFilter('culture')"
            >
          <h4>Culture</h4>

          <p>{{numberOfSelectedFromCategory('culture')}} of {{totalNumberOfCategory('culture')}}</p>

          <div class="filter-category-arrow">
            <span></span>
          </div>
        </div>
        <div class="filter-category-body"
             data-ng-show="states.culture.open"
            >

          <div class="filter-toggle">
            <div class="filter-toggle-show"
                 data-ng-class="{active: allSelectedFromCategory('culture')}"
                 data-ng-click="selectAllFromCategory('culture')"
                >
              Select all
            </div>
            <div class="filter-toggle-hide"
                 data-ng-class="{active: noneSelectedFromCategory('culture')}"
                 data-ng-click="deSelectAllFromCategory('culture')"
                >
              Deselect all
            </div>
          </div>

          <div class="innerwrap">
            <div
                class="div-row"
                ng-repeat="category in cultureCategories.db"
                >

              <div data-ng-if="$index % 2 === 0">
                <div
                    class="filter-category-sub div-cell"
                    data-ng-if="cultureCategories.db[$index+0]"
                    ng-class="{selected: cultureCategories.db[$index+0].selected}"
                    ng-click="toggleCategorySelection(cultureCategories.db[$index+0])"
                    >
                  <span class="checkbox inline"></span>
                  {{cultureCategories.db[$index+0].title}}
                </div>

                <div
                    class="filter-category-sub div-cell"
                    data-ng-if="cultureCategories.db[$index+1]"
                    ng-class="{selected: cultureCategories.db[$index+1].selected}"
                    ng-click="toggleCategorySelection(cultureCategories.db[$index+1])"
                    >
                  <span class="checkbox inline"></span>
                  {{cultureCategories.db[$index+1].title}}
                </div>

              </div>

            </div>
          </div>
        </div>
      </div>

      <div class="filter-category filter-category-wellness"
           data-ng-class="{active: areItemsInThisCategorySelected('wellness'), open: states.wellness.open}"
          >
        <div class="filter-category-header"
             data-ng-click="toggleFilter('wellness')"
            >
          <h4>Wellness & Relax</h4>

          <p>{{numberOfSelectedFromCategory('wellness')}} of {{totalNumberOfCategory('wellness')}}</p>

          <div class="filter-category-arrow">
            <span></span>
          </div>
        </div>
        <div class="filter-category-body"
             data-ng-show="states.wellness.open"
            >

          <div class="filter-toggle">
            <div class="filter-toggle-show"
                 data-ng-class="{active: allSelectedFromCategory('wellness')}"
                 data-ng-click="selectAllFromCategory('wellness')"
                >
              Select all
            </div>
            <div class="filter-toggle-hide"
                 data-ng-class="{active: noneSelectedFromCategory('wellness')}"
                 data-ng-click="deSelectAllFromCategory('wellness')"
                >
              Deselect all
            </div>
          </div>

          <div class="innerwrap">
            <div
                class="div-row"
                ng-repeat="category in wellnessCategories.db"
                >

              <div data-ng-if="$index % 2 === 0">
                <div
                    data-ng-if="wellnessCategories.db[$index+0]"
                    class="filter-category-sub div-cell"
                    ng-class="{selected: wellnessCategories.db[$index+0].selected}"
                    ng-click="toggleCategorySelection(wellnessCategories.db[$index+0])"
                    >
                  <span class="checkbox inline"></span>
                  {{wellnessCategories.db[$index+0].title}}
                </div>

                <div
                    class="filter-category-sub div-cell"
                    data-ng-if="wellnessCategories.db[$index+1]"
                    ng-class="{selected: wellnessCategories.db[$index+1].selected}"
                    ng-click="toggleCategorySelection(wellnessCategories.db[$index+1])"
                    >
                  <span class="checkbox inline"></span>
                  {{wellnessCategories.db[$index+1].title}}
                </div>

              </div>

            </div>
          </div>
        </div>
      </div>

      <div class="filter-toggle">
        <div class="filter-toggle-show"
             data-ng-class="{active: allSelected()}"
             data-ng-click="selectAllCategories()"
            >Show all
        </div>
        <div class="filter-toggle-hide"
             data-ng-class="{active: noneSelected()}"
             data-ng-click="deSelectAllCategories()"
            >Hide all
        </div>
      </div>

    </div>

    <div class="map-debug">
      <strong>Map-Debug:</strong>
      <br/>
      <u>Map ZOOM:</u>
      {{ map.zoom }}
      <br/>
      <u>You clicked here:</u>
      <br/>
      "longitude": {{ map.clickedMarker.longitude }}
      <br/>
      "latitude": {{ map.clickedMarker.latitude }}
    </div>

  </div>

  <div
      class="map-wrap"
      windowheight
      >

    <div class="map-searchbar"
         data-ng-include="'map/mapsearchbar.html'">
    </div>

    <google-map
        center='map.center'
        zoom='map.zoom'
        draggable='true'
        events='map.events'
        >
      <marker
          ng-repeat="m in map.markers | filter:onlySelectedCategories"
          coords='m'
          click='onMarkerClicked(m)'
          options='markerOptions'
          icon='getMarkerIcon(m)'
          >

        <window
            show="m.showWindow"
            closeClick="m.closeClick()"
            >
          <div
              class="window-category-{{m.category.main}}"
              >
            <h4>
              <span class="icon"></span>
              {{m.name}}
            </h4>

            <img src="/img/mapicons/piemont.jpg"
                 width="100"
                 alt=""/>

            <h6>Offered by</h6>

            <div>
              {{m.description}}
            </div>

            <p class="align-right">
              <a href="http://www.paypal.com"
                 target="_blank"
                 class="btn">Book now
              </a>
            </p>
          </div>
        </window>
        <marker-label content="m.name"
                      anchor="22 0"
                      class="marker-labels marker-label-category-{{m.category.main}}"
            />
      </marker>

      <!--marker for clicked position can not put google.map.animations.BOUNCE , since it is not initiaized yet-->
      <div ng-init="opts = {animation:0}">
        <marker coords="map.centerMarker"
                options="opts">
          <marker-label content="map.centerMarker.title"
                        anchor="22 0"
                        class="marker-labels marker-labels-your-location"
              />
        </marker>
      </div>

    </google-map>
  </div>
</div>
</div>

<div data-ng-include="'_footer.html'"></div>